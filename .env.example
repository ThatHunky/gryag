# ============================================================
# Gryag V2 — Environment Configuration
# Copy this file to .env and fill in the values.
# ============================================================

# ---- Telegram ----
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# ---- Admin IDs (comma-separated Telegram user_id values) ----
ADMIN_IDS=392817811

# Optional: comma-separated chat_id list; empty = allow all chats (DMs and groups)
# ALLOWED_CHAT_IDS=123456789,-1001234567890
# Max attachment size (bytes) to send to backend as base64; larger files are skipped (default 10MB)
# MEDIA_MAX_BYTES=10485760

# ---- Gemini API ----
GEMINI_API_KEY=your_gemini_api_key_here
# See https://ai.google.dev/gemini-api/docs/models and each model's capability table.
GEMINI_MODEL=gemini-2.5-flash
GEMINI_TEMPERATURE=0.9
GEMINI_ROUTING_TEMPERATURE=0.0
# Define budget for Gemini Thinking features (0 = disabled, try 1024 or higher for deep thinking)
GEMINI_THINKING_BUDGET=0

# ---- OpenAI API (Optional) ----
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# ---- PostgreSQL ----
POSTGRES_HOST=gryag-postgres
POSTGRES_PORT=5432
POSTGRES_USER=gryag
POSTGRES_PASSWORD=changeme_in_production
POSTGRES_DB=gryag

# ---- Redis ----
REDIS_HOST=gryag-redis
REDIS_PORT=6379
REDIS_PASSWORD=

# ---- Backend Server ----
BACKEND_HOST=gryag-backend
BACKEND_PORT=27710

# ---- Feature Toggles ----
ENABLE_SANDBOX=true
ENABLE_IMAGE_GENERATION=true
ENABLE_PROACTIVE_MESSAGING=false
ENABLE_WEB_SEARCH=true
ENABLE_VOICE_STT=false

# ---- Rate Limiting ----
RATE_LIMIT_GLOBAL_PER_MINUTE=10
RATE_LIMIT_USER_PER_MINUTE=3
RATE_LIMIT_IMAGE_PER_DAY=5
RATE_LIMIT_SANDBOX_PER_DAY=20

# ---- Sandbox ----
SANDBOX_TIMEOUT_SECONDS=5
SANDBOX_MAX_MEMORY_MB=128

# Image generation uses GEMINI_API_KEY and model gemini-3-pro-image-preview (no separate key/URL).

# ---- Proactive Messaging (Kyiv time) ----
# Active hours in Kyiv timezone (e.g. 9-22 = 09:00–22:00). Proactive messages fire at random times within this window.
PROACTIVE_ACTIVE_HOURS_KYIV=9-22
# Frontend: how often to poll GET /api/v1/proactive (seconds). Optional; default 90.
# PROACTIVE_POLL_INTERVAL_SEC=90

# ---- Context Window ----
IMMEDIATE_CONTEXT_SIZE=50
MEDIA_BUFFER_MAX=10

# ---- Data Retention ----
# Messages older than this are deleted on startup (0 = keep forever)
MESSAGE_RETENTION_DAYS=90

# ---- Media cache (generated images for edit by media_id) ----
# Directory to store generated images temporarily; backend returns media_id for future edits
MEDIA_CACHE_DIR=/tmp/gryag_media_cache
# TTL in hours for cached images (24–48 recommended)
MEDIA_CACHE_TTL_HOURS=48

# ---- Persona ----
PERSONA_FILE=config/persona.txt

# ---- Telegram Mode ----
# "polling" for development, "webhook" for production
TELEGRAM_MODE=polling
WEBHOOK_URL=
WEBHOOK_SECRET=

# ---- Localization ----
# Directory containing JSON locale files (uk.json, en.json, etc.)
LOCALE_DIR=config/locales
# Default language code (must match a filename in LOCALE_DIR)
DEFAULT_LANG=uk
